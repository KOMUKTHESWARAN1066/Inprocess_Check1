// @flow
import React from 'react';
import { Dimensions } from 'react-native';
import InteractableContainer from './InteractableContainer';
import CustomModal from './CustomModal';

const { width, height } = Dimensions.get('window');

export class InteractableModalFullsize extends React.PureComponent {
  state = {
    height
  };

  show = () => {
    this.modal.show();
  };

  hide = () => {
    this.drawer.hide();
  };

  onShow = () => {
    this.drawer.show();
  };

  onHide = () => {
    this.modal.hide();
  };

  onOrientationChange = event => {
    if (event.nativeEvent.orientation === 'landscape') {
      this.setState({ height: height > width ? width : height });
    } else {
      this.setState({ height: height > width ? height : width });
    }
  };

  render() {
    return (
      <CustomModal
        onShow={this.onShow}
        ref={component => (this.modal = component)}
        onOrientationChange={this.onOrientationChange}
      >
        <InteractableContainer
          {...this.props}
          height={this.state.height}
          onHide={this.onHide}
          ref={component => (this.drawer = component)}
        />
      </CustomModal>
    );
  }
}

export default InteractableModalFullsize;
